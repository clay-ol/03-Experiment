<HTML>
<script src="https://d3js.org/d3.v4.min.js"></script>


<style>
  div {
    min-width: 400px;
    min-height: 300px;
  }

  .tree {
    border: 1px solid green;
  }

  .pie {
    border: 1px solid purple;
  }

  .bar {
    border: 1px solid brown;
  }

  svg{
    border: 3px solid hotpink;
  }
</style>

<script>
  var jsonData = {"children":[{"name":"boss1","children":[{"name":"mister_a","group":"A","value":28,"colname":"level3"},{"name":"mister_b","group":"A","value":19,"colname":"level3"},{"name":"mister_c","group":"C","value":18,"colname":"level3"},{"name":"mister_d","group":"C","value":19,"colname":"level3"}],"colname":"level2"},{"name":"boss2","children":[{"name":"mister_e","group":"C","value":14,"colname":"level3"},{"name":"mister_f","group":"A","value":11,"colname":"level3"},{"name":"mister_g","group":"B","value":15,"colname":"level3"},{"name":"mister_h","group":"B","value":16,"colname":"level3"}],"colname":"level2"},{"name":"boss3","children":[{"name":"mister_i","group":"B","value":10,"colname":"level3"},{"name":"mister_j","group":"A","value":13,"colname":"level3"},{"name":"mister_k","group":"A","value":13,"colname":"level3"},{"name":"mister_l","group":"D","value":25,"colname":"level3"},{"name":"mister_m","group":"D","value":16,"colname":"level3"},{"name":"mister_n","group":"D","value":28,"colname":"level3"}],"colname":"level2"}],"name":"CEO"}
</script>


<script>
  console.log(d3); // test if d3 is loaded

  var testData = { a: 10, b: 50, c: 20, d: 2, e: 16, f: 89 }
  //initialize global vars like width and height
  const WIDTH = 400;
  const HEIGHT = 300;
  //x and y scaling
  var xScale = d3.scaleLinear()
    .range([0, WIDTH])
    .domain([1450, 5000]);//TODO change these values
  var yScale = d3.scaleLinear()
    .range([0, HEIGHT])
    .domain([2, 89]);
  // function(d){return xscale(d);}

</script>

<body>
  <h1> Hunter Experiment </h1>
  <div id="tree">
  <script>
    //add svg to tree div
    var svg_tree = d3.select('#tree')
      .append("svg")
      .attr("width",WIDTH)
      .attr("height",HEIGHT)
      .append("g")
      .attr("transform", "translate(" + WIDTH / 2 + "," + HEIGHT / 2 + ")");

    var root = d3.hierarchy(jsonData).sum(function(d){ return d.value});
    var tree = d3.treemap()
      .size([WIDTH,HEIGHT])
      .padding(2)
      (root)
    
    svg_tree.selectAll("rect")
      .data(root.leaves())
      .enter()
      .append("rect")
      .attr('x', function (d) { return d.x0; })
      .attr('y', function (d) { return d.y0; })
      .attr('width', function (d) { return d.x1 - d.x0; })
      .attr('height', function (d) { return d.y1 - d.y0; })
      .style("stroke", "black")
      .style("fill", "slateblue")

  </script>
  </div>

  
  <h1> Clay Experiment</h1>
  <div id="pie">
    <script>
      var svg_pie = d3.select("#pie")
  .append("svg")
  .attr("width", WIDTH)
  .attr("height", HEIGHT)
  .append("g")
    .attr("transform", "translate(" + WIDTH / 2 + "," + HEIGHT / 2 + ")");

  var radius = HEIGHT/2 - 10 // add margin to prevent clipping

  var pie = d3.pie()
    .value(function(d) {return d.value;})
  var pieData = pie(d3.entries(testData))

  svg_pie
  .selectAll('data')
  .data(pieData)
  .enter()
  .append('path')
  .attr('d', d3.arc()
  .innerRadius(0)
  .outerRadius(radius)
  )
  .attr("fill", "white")
  .attr("stroke", "black")
  .style("stroke-width", "2px")

        </script>
  </div>
  <h1> Nick Experiment</h1>
  <div id="bar">
    <script>
      // add svg for bar chart
      var svgbar = d3.select("#bar")
      .append("svg")
      .attr("width", WIDTH)
      .attr("height", HEIGHT)
      .append("g")
        .attr("transform", "translate(" + WIDTH / 2 + "," + HEIGHT / 2 + ")");

      // add group element to svg to hold axes and bars
      var gbar = svgbar.append("g").attr("transform", "translate(" + 100 + "," + 100 + ")")

      gbar.append("g")
      .attr("transform", "translate(0," + HEIGHT + ")")
      .call(d3.axisBottom(xScale));


    </script>
  </div>

</body>
<form id="form_submit">
  <input type="submit" value="submit">
</form>

</HTML>